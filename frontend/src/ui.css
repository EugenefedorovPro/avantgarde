/* =========================================================
   ui.css — de CHIRICO VARIANT (METAPHYSICAL PIAZZA)
   Arcades, long shadows, ochre walls, green sky.
   Чистое поле для текста — без наложений под текстом.
   На смартфоне вкладки “внутри” полотна (карточки).
   ========================================================= */


/* =========================
   ТОКЕНЫ / БАЗА
   ========================= */

:root{
  --font: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;

  /* Площадь у де Кирико: сумеречное небо и стены */
  --sky:   #2b5f4a;   /* зелёное небо, метафизическое */
  --wall:  #caa065;   /* охра стен */
  --stucco:#f3e7d1;   /* светлая штукатурка */
  --shadow:#151515;   /* глубокая тень */
  --ink:   #111111;   /* чёрная тушь (текст) */
  --ink-2: #2b2b2b;   /* вторичный */

  /* акценты (жалюзи/ставни, колонны) */
  --shutter: #154a6c;
  --brick:   #7a4d2b;
  --bronze:  #74623e;

  /* линии / ритм */
  --hair: 1px;
  --rule: 3px;

  --step: 8px;
  --gap:  12px;

  --ui-h: 52px;
  --ui-h-mobile: 44px;

  --pad: 20px;
  --pad-m: 14px;

  --content-max: 860px;

  /* фикс-бар вкладок */
  --tabs-pad-y: 10px;
  --tabs-pad-x: 16px;
  --tabs-h: var(--ui-h);
  --tabs-rule-gap: 10px;
  --tabs-bar-h: calc(
    (var(--tabs-pad-y) * 2) + var(--tabs-h) + var(--tabs-rule-gap) + var(--rule)
  );
}

*,
*::before,
*::after{ box-sizing: border-box; }

html, body{ min-height:100%; overflow-x:hidden; }

body{
  margin:0;
  min-height:100vh;
  color: var(--ink);
  background:
    /* дальняя стена и земля */
    linear-gradient(180deg, var(--sky) 0 54%, #e9d8ba 54% 100%);
  font: 400 16px/1.76 var(--font);
  letter-spacing:.01em;
}

/* Фон-архитектура (только “на стене”, НЕ под текстовыми блоками) */
body::before{
  content:"";
  position:fixed; inset:0; z-index:0; pointer-events:none;

  /* левая аркада и длинные тени на площади */
  background:
    /* тень от аркады (очень длинная) */
    linear-gradient(80deg, rgba(0,0,0,.22) 0 26%, transparent 26% 100%) 0 62%/40% 38% no-repeat,
    /* стенка-охра и проём-арка */
    linear-gradient(0deg, var(--wall) 0 100%) 0 30%/38% 34% no-repeat,
    radial-gradient(130% 60% at 19% 44%, transparent 60%, var(--shadow) 61% 61.8%, transparent 62%) 0 30%/38% 34% no-repeat,
    /* ставни/жалюзи */
    linear-gradient(0deg, var(--shutter) 0 100%) 25% 38%/8% 11% no-repeat,
    /* дальняя башня */
    linear-gradient(0deg, var(--stucco) 0 100%) 72% 22%/7% 26% no-repeat,
    linear-gradient(80deg, rgba(0,0,0,.18), transparent 60%) 72% 48%/26% 40% no-repeat;
  mix-blend-mode: multiply;
  filter: saturate(95%);
  opacity:.95;
}

/* Контент выше “архитектуры” */
#root{ position:relative; z-index:1; }

/* Начало контента ближе к вкладкам */
#root{
  min-height:100vh;
  padding: calc(var(--tabs-bar-h) + var(--step)) var(--step) calc(var(--step) * 3);
}


/* =========================
   ВКЛАДКИ — “АНТЕФИКС И КАРНИЗ”
   ========================= */

.custom-tabs .nav-tabs,
.custom-tabs.nav-tabs{
  position:fixed; top:0; left:0; right:0; z-index:1000;

  margin:0 !important;
  padding: var(--tabs-pad-y) var(--tabs-pad-x) 0 !important;

  display:flex; align-items:center; gap:var(--gap);
  flex-wrap:nowrap; overflow-x:auto; -webkit-overflow-scrolling:touch;

  /* карниз и тёплый отражённый свет стен */
  background:
    linear-gradient(180deg, rgba(0,0,0,.45) 0 6px, transparent 6px 100%),
    linear-gradient(90deg, rgba(202,160,101,.18), transparent 55%),
    linear-gradient(270deg, rgba(116,98,62,.12), transparent 60%),
    transparent;
  border-bottom:0 !important;
  box-shadow: 0 var(--rule) 0 0 var(--ink);
  scrollbar-width:none;
}
.custom-tabs .nav-tabs::-webkit-scrollbar,
.custom-tabs.nav-tabs::-webkit-scrollbar{ display:none; }

.custom-tabs .nav-tabs::after,
.custom-tabs.nav-tabs::after{
  content:""; display:block; width:100%; height:var(--rule);
  margin-top:var(--tabs-rule-gap); background:var(--ink);
  flex:0 0 100%;
}

.custom-tabs .nav-tabs > .nav-item,
.custom-tabs.nav-tabs > .nav-item{ flex:0 0 auto; }

/* Плашки вкладок: штукатурка + тени карниза; актив — с “подштриховкой” */
.custom-tabs .nav-link{
  background: var(--stucco);
  color: var(--ink);
  border: var(--rule) solid var(--ink) !important;
  border-radius:0 !important;

  height:var(--tabs-h);
  display:inline-flex; align-items:center; justify-content:center;

  min-width:132px; padding:0 16px;
  font-weight:900; letter-spacing:.06em; text-transform:uppercase;
  white-space:nowrap;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.18),
    0 4px 0 var(--shadow); /* короткая тень от плашки */
}

.custom-tabs .nav-link:not(.active):hover{
  background:#efe2c6;
}

.custom-tabs .nav-link.active,
.custom-tabs .nav-link.active:hover{
  background:#f7edd8 !important;
  box-shadow:
    inset 0 0 0 1px var(--ink),
    inset 0 -6px 0 0 var(--brick),
    0 4px 0 var(--shadow);
}

/* Смартфон: вкладки внутри ширины полотна, ограничены боковыми правилами */
@media (max-width:576px){
  :root{
    --tabs-h: var(--ui-h-mobile);
    --tabs-bar-h: calc(
      (var(--tabs-pad-y) * 2) + var(--tabs-h) + var(--tabs-rule-gap) + var(--rule)
    );
  }

  .custom-tabs .nav-tabs,
  .custom-tabs.nav-tabs{
    left:50%; right:auto; transform:translateX(-50%);
    width:100%; max-width:var(--content-max);

    border-left: var(--rule) solid var(--ink) !important;
    border-right:var(--rule) solid var(--ink) !important;

    padding-left:var(--pad-m) !important; padding-right:var(--pad-m) !important;
    gap:8px;
  }

  .custom-tabs .nav-link{
    min-width:auto; padding:0 12px; font-size:.95rem; letter-spacing:.05em;
  }
}


/* =========================
   КАРТОЧКА СТИХА — “ПОРТИК И ПЛОЩАДЬ”
   ========================= */

.verseBox{
  width:min(100%, var(--content-max));
  margin: clamp(6px, 2vh, 20px) auto 0; /* близко к вкладкам */
  padding: var(--pad);

  background:#fffdf6; /* светлая бумага в тёплом воздухе */
  border: var(--rule) solid var(--ink);
  border-radius:0;

  position:relative; overflow:visible;
}

/* Кромки-архитектоника (только по краям, НЕ под текстом) */
.verseBox::before,
.verseBox::after{
  content:""; position:absolute; pointer-events:none; z-index:0;
}

/* Верхняя полоса — карниз с тёплым отсветом и тонкой тенью */
.verseBox::before{
  left:0; right:0; top:0; height:12px;
  background:
    linear-gradient(180deg, rgba(0,0,0,.18) 0 3px, transparent 3px 100%),
    linear-gradient(90deg, rgba(202,160,101,.35), rgba(243,231,209,.25));
}

/* Левая кромка — колонна и “длинная тень” в поле рамки */
.verseBox::after{
  top:0; bottom:0; left:0; width:14px;
  background:
    linear-gradient(0deg, var(--bronze) 0 22%, var(--wall) 22% 100%),
    linear-gradient(90deg, rgba(0,0,0,.18), transparent 45%);
}

/* Контент поверх */
.verseBox > *{ position:relative; z-index:1; }

@media (max-width:576px){
  .verseBox{ padding: var(--pad-m); }
}

/* Заголовок — как надпись на фасаде */
.verseTitle{
  margin:0 0 10px;
  font-weight:900;
  letter-spacing:.08em;
  text-transform:uppercase;
  color:var(--ink);
}

/* Текст — ровный, как пустая площадь */
.verseText{
  line-height:1.9;
  color: var(--ink-2);
  word-break:break-word;
}

.verseTop{ margin-top:8px; }
.verseBottom{ margin-top:12px; }


/* =========================
   КНОПКИ — “КАЙМА И ДАЛЬНЯЯ ТЕНЬ”
   ========================= */

.u-btn{
  border-radius:0 !important; box-shadow:none !important;

  background: var(--stucco) !important;
  color: var(--ink) !important;
  border: var(--rule) solid var(--ink) !important;

  display:inline-flex !important; align-items:center !important; justify-content:center !important;

  font-weight:900; letter-spacing:.06em; text-transform:uppercase;

  width:100%; max-width:min(92vw, 980px);
  height:var(--ui-h); padding:0 18px;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.18),
    0 6px 0 var(--shadow); /* длинная жёсткая тень */
}

.u-btn:hover{
  background:#efe2c6 !important;
}
.u-btn:active{
  transform:translate(1px,1px);
  box-shadow:
    inset 0 0 0 1px var(--ink),
    0 4px 0 var(--shadow);
}

.u-btn--wide{  max-width:min(92vw, 1100px); }
.u-btn--square{ width:var(--ui-h); max-width:var(--ui-h); padding:0; }

@media (max-width:576px){
  .u-btn{ height:var(--ui-h-mobile); }
  .u-btn--square{ width:var(--ui-h-mobile); max-width:var(--ui-h-mobile); }
}


/* =========================
   ТРЕУГОЛЬНАЯ — “СТРЕЛКА-ТЕНЬ”
   ========================= */

.tri-btn{
  --box: var(--ui-h);
  width:var(--box); height:var(--box);
  border: var(--rule) solid var(--ink); border-radius:0;
  background: var(--stucco); cursor:pointer;

  display:inline-flex; align-items:center; justify-content:center; padding:0;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.18),
    0 6px 0 var(--shadow);
}

.tri-btn::before{
  content:""; width:0; height:0;
  border-top: calc(var(--box) * 0.26) solid transparent;
  border-bottom: calc(var(--box) * 0.26) solid transparent;
}
.tri-btn--left::before { border-right: calc(var(--box) * 0.36) solid var(--ink); }
.tri-btn--right::before{ border-left:  calc(var(--box) * 0.36) solid var(--ink); }

.tri-btn:hover{ background:#efe2c6; }
.tri-btn:active{ transform:translate(1px,1px); box-shadow: inset 0 0 0 1px var(--ink), 0 4px 0 var(--shadow); }

@media (max-width:576px){
  .tri-btn{ --box: var(--ui-h-mobile); }
}


/* =========================
   АУДИО — “НИША ПОД АРКОЙ”
   ========================= */

.audio-box{ width:100%; }

.audio-frame{
  width:100%;
  border: var(--rule) solid var(--ink);
  border-radius:0; overflow:hidden;
  background: #fffaf0;

  box-shadow:
    inset 0 0 0 1px rgba(0,0,0,.18),
    0 6px 0 var(--shadow);
}
.audio-frame:hover        { outline: var(--rule) solid var(--ink); outline-offset:-2px; }
.audio-frame:focus-within { outline: var(--rule) solid var(--ink); outline-offset:-2px; }

.square-audio{ width:100%; display:block; border-radius:0 !important; }
.square-audio::-webkit-media-controls-enclosure,
.square-audio::-webkit-media-controls-panel{ border-radius:0 !important; }


/* =========================
   ПАНЕЛЬ УПРАВЛЕНИЯ — “ЛИНЕЙКА ПЛОЩАДИ”
   ========================= */

.controlsBar{
  display:grid; grid-template-columns: var(--ui-h) minmax(0,1fr) var(--ui-h);
  gap:var(--gap); align-items:center; width:100%;

  margin-top:14px; padding-top:12px;
  border-top: var(--hair) solid rgba(0,0,0,.25);
  position:relative;
}

/* маленький “обломок тени” слева как маркер */
.controlsBar::before{
  content:""; position:absolute; left:0; top:-2px; width:40px; height:8px;
  background:
    linear-gradient(90deg, var(--brick) 0 40%, var(--shutter) 40% 70%, var(--bronze) 70% 100%);
  pointer-events:none;
}

.controlsBar > *{ min-width:0; }
.controlsBar .u-btn{ max-width:none; width:100%; justify-self:stretch; }

@media (max-width:576px){
  .controlsBar{
    grid-template-columns: var(--ui-h-mobile) minmax(0,1fr) var(--ui-h-mobile);
    padding-top:10px; margin-top:12px;
  }
}
